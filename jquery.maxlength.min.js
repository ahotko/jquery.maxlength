/*!
 * jquery.maxlength.js - version 1.5.1 - 2023-04-23
 * Copyright (c) 2023 scintilla0 (https://github.com/scintilla0)
 * @license MIT License http://www.opensource.org/licenses/mit-license.html
 * @license GPL2 License http://www.gnu.org/licenses/gpl.html
 */
let NumberUtil;!function(){const e=[110,190],n=[109,189],l={V:86,X:88},i=[48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105],r={F5:116,esc:27,backspace:8,del:46,tab:9,enter:13,enterSub:108,pageUp:33,pageDown:34,end:35,home:36,left:37,right:38,up:39,down:40},u={NONE:0,DOT:1,MINUS:2,NUMBER:3,FUNCTION:4},s={integral:9},o={VALID_CHARACTER:"-.0123456789",MINUS:"-",DOT:".",ZERO:"0",COMMA:",",EMPTY:"",INTEGRAL:"integral",FRACTIONAL:"fractional",ALLOW_MINUS:"minus",DEFAULT_ID:"_max_length_no_",MAX_LENGTH:"data-max-length",INIT_FRESH:"data-disable-init-refresh",AUTOFILL:"data-disable-autofill",AUTO_COMMA:"data-disable-auto-comma",SMART_MINUS:"data-disable-smart-minus",HIGHLIGHT_MINUS:"data-enable-highlight-minus",HORIZONTAL_ALIGN:"data-horizontal-align",SUM:"data-sum",HEX_REGEX:/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/},a={HORIZONTAL_ALIGN:"right",MINUS_COLOR:"#FF0000"},c=["left","center","right","inherit"],f=function(){function t(t){return void 0!==t&&null!=t}let e={};function n(t,n,l=0){null==e[n]?(e[n]=setTimeout((()=>e[n]=null),l),setTimeout((()=>t.apply()))):(clearTimeout(e[n]),e[n]=setTimeout((()=>e[n]=null),l))}return{exists:t,isBlank:function(e){return!(t(e)&&""!==e.trim())},throttleTimer:e,throttle:n,setValue:function(t,e,...l){for(let i of l)$(i).each(((l,i)=>{$(i).is("input:radio, input:checkbox")?($(i).prop("checked",!1),$(i).filter("[value='"+t.toString()+"']").prop("checked",!0)):$(i).is("input:text, input:hidden, textarea, select")?$(i).val(t):$(i).is("label, span")?$(i).text(t):$(i).is("a")&&$(i).attr("href",t),!0===e&&n((()=>$(i).blur().change()),$(i).attr("id"))}))},getValue:function(t){return $(t).is("input:radio, input:checkbox")?$(t).filter(":checked").val():$(t).is("input:text, input:hidden, textarea, select")?$(t).val():$(t).is("label, span")?$(t).text():$(t).is("a")?$(t).attr("href"):void 0}}}(),N=L();let d,I={},T="["+o.MAX_LENGTH+"]";function M({target:t}){let e=t.value;U(t,o.AUTOFILL)&&(e=N.drainFractional(e)),U(t,o.AUTO_COMMA)&&(e=N.undressNumber(e)),t.value=e,U(t,o.HIGHLIGHT_MINUS)||t.style.setProperty("color","")}function O({target:t}){let e=N.drainIntegral(t.value);if(U(t,o.AUTOFILL)&&(e=N.fillFractional(e,h(t)[o.FRACTIONAL])),U(t,o.AUTO_COMMA)&&(e=N.dressNumber(e)),t.value=e,!U(t,o.HIGHLIGHT_MINUS))if(e.includes(o.MINUS)){let e=$(t).attr(o.HIGHLIGHT_MINUS);t.style.setProperty("color",o.HEX_REGEX.test(e)?e:a.MINUS_COLOR)}else t.style.setProperty("color","")}function g(t){let e=$(t).attr(o.HORIZONTAL_ALIGN);c.includes(e)||(e=void 0),e=f.exists(e)?e:a.HORIZONTAL_ALIGN,t.style.setProperty("text-align",e)}function A(t){let e=t.id;f.isBlank(e)&&(e=o.DEFAULT_ID+Object.values(I).length,t.id=e);let n=$(t).attr(o.MAX_LENGTH);if(f.isBlank(n)||isNaN(Number(n)))return void(I[e]=s);if(n.startsWith(o.DOT)||n.endsWith(o.DOT)||!n.startsWith(o.MINUS)&&n.includes(o.MINUS))return void(I[e]=s);let l=n.includes(o.MINUS)?n.substring(1):n,i=l.split(o.DOT);if(isNaN(Number(i[0]))||l===o.ZERO&&isNaN(Number(i[1])))return void(I[e]=s);let r={};r[o.INTEGRAL]=Number(i[0]),0===r[o.INTEGRAL]&&(r[o.INTEGRAL]=s[o.INTEGRAL]),-1!==l.indexOf(o.DOT)&&i[1]!==o.ZERO&&(r[o.FRACTIONAL]=Number(i[1])),n.startsWith(o.MINUS)&&(r[o.ALLOW_MINUS]=1),I[e]=r}function h(t){let e=I[t.id];return f.exists(e)||(g(t),A(t),e=I[t.id]),e}function S(t,e){let n=t.value,l=t.selectionStart,i=t.selectionEnd,r=n.substring(l,i);if(0===r.length)return!0;if(r.includes(o.DOT)){return!((n.includes(o.MINUS)?n.substring(1):n).length-(i-l)>e[o.INTEGRAL])}return!0}function U(t,e){return!f.exists($(t).attr(e))}function L(){const t="recursion_flag";function e(n,l){let i=null;if(f.exists(n))if("number"==typeof n)i=n;else if("string"==typeof n){let r=n.trim().replaceAll(o.COMMA,o.EMPTY);if(!f.isBlank(r))if(r=Number(r),isNaN(r)){if(l!==t&&!f.isBlank(n)){let l=null;0===$(n).length&&(l=f.getValue(n)),i=e(l,t)}}else i=r}return i}function n(t){let e=0,n=t.toString().split(o.DOT);return n.length>1&&(e=n[1].length),e}function l(t){return Number(t.toString().replace(o.DOT,o.EMPTY))}function i(t,e){let i=n(t),r=n(e),u=Math.max(i,r),s=Math.pow(10,u-i),o=Math.pow(10,u-r),a=Math.pow(10,u);return(l(t)*s+l(e)*o)/a}function r(t,e){let i=Math.pow(10,n(t)+n(e));return l(t)*l(e)/i}function u(t,e,n){let l=Math.pow(10,e),i=t*l;return i=n.apply(null,[i]),i/l}return{sum:function(...t){let n=0;for(let l of t)l=e(l),null!==l&&(n=i(n,l));return n},blendSum:function(...t){let n=0,l=!0;for(let r of t)"boolean"!=typeof r?(r=e(r),null!=r&&(l||(r=Number(-r)),n=i(n,r))):l=r;return n},selectorSum:function(...t){let n=0;for(let l of t)$(l).each(((t,l)=>{let r=e($(l).val());null!==r&&(n=i(n,r))}));return n},product:function(...t){let n=null;for(let l of t)l=e(l),null!==l&&(null===n&&(n=1),n=r(n,l));return n},productNN:function(...t){let n=1;for(let l of t)l=e(l),null===l&&(l=0),n=r(n,l);return n},selectorProduct:function(...t){let n=null;for(let l of t)$(l).each(((t,l)=>{let i=e($(l).val());null!==i&&(null===n&&(n=1),n=r(n,i))}));return n},selectorProductNN:function(...t){let n=1;for(let l of t)$(l).each(((t,l)=>{let i=e($(l).val());null===i&&(i=0),n=r(n,i)}));return n},quotient:function(t,i){return t=e(t),i=e(i),null===t||null===i||0===i?0:function(t,e){let i=Math.pow(10,n(t)+n(e));return l(t)/l(e)/i}(t,i)},round:function(t,n=0){return u(e(t),n,(t=>Math.round(t)))},floor:function(t,n=0){return u(e(t),n,(t=>Math.floor(t)))},ceil:function(t,n=0){return u(e(t),n,(t=>Math.ceil(t)))},mix2Number:e,dressNumber:function(t){if(null===e(t))return t;let n=(t=(t=t.toString().trim()).replaceAll(o.COMMA,o.EMPTY)).split(o.DOT),l=n[0].replace(/\.+$/g,"").replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,");return f.exists(n[1])&&(l=l+o.DOT+n[1]),l},undressNumber:function(t){return null===e(t)?t:(t=t.toString().trim()).replaceAll(o.COMMA,o.EMPTY)},drainIntegral:function(t){if(null===e(t))return t;let n=(t=t.toString().trim()).includes(o.MINUS),l=t.replace(o.MINUS,o.EMPTY);for(;l.startsWith(o.ZERO);)l=l.substring(1);return(0===l.length||l.startsWith(o.DOT))&&(l=o.ZERO+l),(n?o.MINUS:o.EMPTY)+l},drainFractional:function(t){if(null===e(t))return t;let n=(t=t.toString().trim()).split(o.DOT),l=n[1];for(f.exists(l)||(l=o.EMPTY);l.endsWith(o.ZERO);)l=l.substring(0,l.length-1);return n[0]+(0!==l.length?o.DOT+l:o.EMPTY)},fillFractional:function(t,n){if(null===e(t)||!f.exists(n)||0===n)return t;let l=(t=t.toString().trim()).split(o.DOT),i=l[1];return f.exists(i)||(i=o.EMPTY),l[0]+o.DOT+i.padEnd(n,o.ZERO)},setValue:f.setValue,getValue:f.getValue}}$(T).each(((t,e)=>{g(e),A(e)})),$(document).on("dragstart",T,(function({target:t}){if(t.selectionStart!==t.selectionEnd)return!1})).on("keydown",T,(function({target:t,keyCode:s,ctrlKey:a}){let c=h(t),N=function(t,e,n,i){if(i){if(n===l.V){let n=t.value,l=t.selectionEnd;return setTimeout((()=>{let i=t.value,r=i.includes(o.MINUS)?i.substring(1):i,u=!1;if(!f.exists(e[o.ALLOW_MINUS])&&i.includes(o.MINUS))u=!0;else if(!f.exists(e[o.FRACTIONAL])&&i.includes(o.DOT))u=!0;else if(i.replace(o.DOT).includes(o.DOT))u=!0;else if(i.replace(o.MINUS).includes(o.MINUS))u=!0;else{let t=r.split(o.DOT);(t[0].length>e[o.INTEGRAL]||f.exists(t[1])&&f.exists(e[o.FRACTIONAL])&&t[1].length>e[o.FRACTIONAL])&&(u=!0)}if(!1===u)for(let t in i)if(!o.VALID_CHARACTER.includes(i[t])){u=!0;break}!0===u&&(t.value=n,t.selectionEnd=l)})),!0}return n!==l.X||S(t,e)}return null}(t,c,s,a);if(f.exists(N))return N;return function(t,l,s){let a=function(t){return e.includes(t)?u.DOT:n.includes(t)?u.MINUS:i.includes(t)?u.NUMBER:Object.values(r).includes(t)?u.FUNCTION:u.NONE}(s),c=t.value,N=t.selectionStart,d=t.selectionEnd,I=d,T=$(t).attr(o.SMART_MINUS);if(a===u.NONE)return!1;if(a===u.MINUS)return f.exists(T)?!!f.exists(l[o.ALLOW_MINUS])&&(0===N&&d===c.length||!c.includes(o.MINUS)&&0===I):(f.exists(l[o.ALLOW_MINUS])&&(t.value=c.includes(o.MINUS)?c.substring(1):o.MINUS+c,setTimeout((()=>{let e=I+(c.includes(o.MINUS)?-1:1);0===I&&c.includes(o.MINUS)&&(e=0),t.selectionEnd=e}))),!1);if(a===u.DOT){if(f.exists(l[o.FRACTIONAL])){if(0===N&&d===c.length)return t.value="0.",!1;if(c.includes(o.DOT))return!1;if(c.includes(o.MINUS)&&0===I)return!1;{let e=[c.substring(0,I),c.substring(I,c.length)],n=e[0];return e[0]=e[0].includes(o.MINUS)?e[0].substring(1):e[0],!c.includes(o.MINUS)&&0===I||c.includes(o.MINUS)&&I===c.indexOf(o.MINUS)+1?(e[0].length<=l[o.INTEGRAL]&&e[1].length<=l[o.FRACTIONAL]&&(t.value=n+"0."+e[1]),!1):!(e[0].length>l[o.INTEGRAL]||e[1].length>l[o.FRACTIONAL])}}return!1}let M=(c.includes(o.MINUS)?c.substring(1):c).split(o.DOT),O=c.indexOf(o.DOT);if(a===u.NUMBER)return 0===N&&d===c.length||(!c.includes(o.MINUS)||I!==c.indexOf(o.MINUS))&&(c.includes(o.DOT)?!(M[0].length>=l[o.INTEGRAL]&&I<=O)&&!(M[1].length>=l[o.FRACTIONAL]&&I>O):!(M[0].length>=l[o.INTEGRAL]));if(a===u.FUNCTION)return 0===N&&d===c.length||(s===r.backspace?N!==d?S(t,l):!(c.includes(o.DOT)&&I===O+1&&M[0].length+M[1].length>l[o.INTEGRAL]):s!==r.del||(N!==d?S(t,l):!(c.includes(o.DOT)&&I===O&&M[0].length+M[1].length>l[o.INTEGRAL])));return!1}(t,c,s)})).on("focus",T,M).on("blur",T,O).on("compositionstart",T,(function({target:t}){d=t.value})).on("compositionend",T,(function({target:t}){t.value=d,d=null})),$(T+":not(["+o.INIT_FRESH+"])").each(((t,e)=>{M({target:$(e)[0]}),O({target:$(e)[0]})})),$("["+o.SUM+"]").each((function(t,e){let n=$(e).attr(o.SUM);$(document).on("change",n,(function(){$(e).val(N.selectorSum(n))}))})),NumberUtil=L}();